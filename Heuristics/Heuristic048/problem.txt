問題の要点まとめ
🎯 目的
H = 1000 種類のターゲット色を、指定された順番通りに作成する。
スコアを最小化する。
🛠️ 主要なルールと要素
色と混合:

色は3次元ベクトル (C, M, Y) で表現される。
絵の具を混ぜた後の色は、それぞれの量の重み付き平均になる。
パレットとウェル:

パレットは N x N (N=20) の固定サイズ。
仕切りの操作 (操作4) で、マスを連結して「ウェル」を作ったり、分割したりできる。
kマスでできたウェルには、最大kグラムの絵の具を入れられる。
操作コマンド:

1 i j k: チューブkからウェルへ1g追加する。スコアのコストVが1増える唯一の操作。
2 i j: ウェルから1g提出する。ちょうどH回実行必須。
3 i j: ウェルから1g廃棄する。
4 i1 j1 i2 j2: 隣接マスの仕切りを操作する。ウェルを混合または分割できる。
🔢 制約とパラメータ
パレットサイズ N: 20
ターゲット色数 H: 1000
チューブ色数 K: 4～20
最大ターン数 T: 4000～64000
無駄コスト係数 D: 10～10000
💰 スコア計算
スコア (小 → 優) = 1 + D * (V - H) + round(10^4 * E)

V: 操作1の総回数 (チューブから出した絵の具の総量)。
H: 提出必須の絵の具の量 (1000g)。
V - H: 無駄になった絵の具の量。
E: 作成した色とターゲット色の誤差の総和 (二乗和)。
💡 重要なヒント
入力生成方法: 各ターゲット色は、手持ちのK種類のチューブ絵の具の加重平均によって生成されている。これは、理論上はチューブの絵の具をうまく混ぜればターゲット色を（近似的に）作れることを意味する。


入力形式 📝
入力は以下の形式で標準入力から与えられます。

1行目: N K H T D

N: パレットのサイズ (常に 20)
K: チューブ絵の具の種類数 (4 以上 20 以下)
H: 作成すべき色の数 (常に 1000)
T: 操作可能な最大ターン数 (4000 以上 64000 以下)
D: チューブから絵の具を1グラム出す際のコスト (10 以上 10000 以下)
続く K 行: 各チューブの絵の具の色 C_own M_own Y_own

i 番目 (0-indexed) のチューブの色: C_i_own M_i_own Y_i_own
各成分は 0 以上 1 以下の実数です。
さらに続く H 行: 各ターゲットの色 C_target M_target Y_target

i 番目 (0-indexed) に作るべきターゲットの色: C_i_target M_i_target Y_i_target
各成分は 0 以上 1 以下の実数です。
例 (一部):

20 5 1000 60000 100
0.1 0.2 0.7  // K行続く (チューブ0の色)
...
0.8 0.5 0.1  // チューブK-1の色
0.45 0.35 0.4 // H行続く (ターゲット0の色)
...
0.6 0.2 0.9  // ターゲットH-1の色
出力形式 💻
出力は、以下の2つのパートで構成されます。

パート1：仕切りの初期配置
まず、初期状態におけるパレットの仕切りの配置を出力します。

縦の仕切り (Vertical dividers): N 行 × (N-1) 列

各行には N-1 個の整数をスペース区切りで出力します。
v_ij (0または1): マス (i,j) とマス (i,j+1) の間の仕切りの状態。
0: 仕切りが下がっている (連結)
1: 仕切りが出ている (分離)
v_0,0 v_0,1 ... v_0,N-2
v_1,0 v_1,1 ... v_1,N-2
...
v_N-1,0 v_N-1,1 ... v_N-1,N-2
横の仕切り (Horizontal dividers): (N-1) 行 × N 列

各行には N 個の整数をスペース区切りで出力します。
h_ij (0または1): マス (i,j) とマス (i+1,j) の間の仕切りの状態。
0: 仕切りが下がっている (連結)
1: 仕切りが出ている (分離)
h_0,0 h_0,1 ... h_0,N-1
h_1,0 h_1,1 ... h_1,N-1
...
h_N-2,0 h_N-2,1 ... h_N-2,N-1
パート2：操作ログ
次に、最大 T 行の操作を、1ターンにつき1行の形式で出力します。

絵の具の追加 (Add paint): 1 i j k
マス (i,j) の属するウェルに、チューブ k (0-indexed) から絵の具を1グラム追加します。
絵の具の提出 (Submit paint): 2 i j
マス (i,j) の属するウェルから1グラムの絵の具を取り出して画伯に渡します。
絵の具の廃棄 (Discard paint): 3 i j
マス (i,j) の属するウェルから1グラムの絵の具を取り出して廃棄します。
仕切りの操作 (Toggle divider): 4 i1 j1 i2 j2
マス (i1,j1) とその隣接マス (i2,j2) の間の仕切りを出し入れします。
出力例 (一部):

1 1 ... 1  // 縦の仕切り (1行目)
...
1 1 ... 1  // 縦の仕切り (N行目)
1 1 ... 1  // 横の仕切り (1行目)
...
1 1 ... 1  // 横の仕切り (N-1行目)
1 0 0 3    // 操作ログ (1ターン目)
1 0 1 4
4 0 0 0 1
2 0 0
...

(絶対スコア(小さい方がよい))
チューブのなかで最も近いものを渡すだけ -> 2309646
190の混合パターン(2g)の中で最も近いものを作成or余ってるの再利用 -> 1003938
単色も追加 -> 977260
